{% extends 'WER_app/base.html' %}
{% load staticfiles %}

{% block body_block %}

            <style> 
                #Review {
                  font-family: helvetica;
                  font-size:20px;
                  background-color: rgba(255,255,255,1);
                  padding: 10px;
                }
                #Views {
                  position: fixed;
                  left: 50%;
                  bottom: 20px;
                  transform: translate(-50%, -50%);
                  margin: 0 auto;
                }
                .checked {
                  color: #f4f142;
                
                
            </style>
        <div>
            <div>
                
        {% if pages %}
            {% for page in pages %}
        <div style="padding: 30px;"}>
               <h1 style="color: white"><u> {{page.title}} </u></h1>
                </div>
                 <div style="padding: 30px;"}>
               <img src = "{{ MEDIA_URL}}{{page.picture}}" alt = "Restaurant Picture" />
                </div>
               <div>
               <div id="map" style="float:right; position:relative; width:35%; height:350px"></div>
                <script>
                // Initialize and add the map
                function initMap() {
                 // The location of Uluru
                  var coords = {lat: {{page.latitude}}, lng: {{page.longitude}}};
                  // The map, centered at Uluru
                  var map = new google.maps.Map(
                  document.getElementById('map'), {zoom: 10, center: coords});
                 // The marker, positioned at Uluru
                 var marker = new google.maps.Marker({position: coords, map: map});
                }
                </script>
            <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD6zeXEmA7r55_YKB5Zy6pXIiuarsCBhdE&callback=initMap">
            </script>
                </div>
               
               <div style="padding: 30px;"}>
               <h4 style="color: white"> {{page.description}} </h4>
               <h4 style="color: white"> Address: {{page.address}} </h4>
               <h4 style="color: white"> Opening Hours: {{page.openingHours}} </h4>
                </div>
        
    
            {% endfor %}
        {% endif %}
        
                <div style="padding: 30px;"}>
        {% if reviews %} 
        
            {% for review in reviews %} 
                
                <ul id = "Review">
                
                <ul>{{review.date_modified}}
                    {{review.comment}} - Rating: {% with ''|center:review.avgRating as range %}
                    {% for _ in range %}
                         <span class="fa fa-star checked"></span>
                    {% endfor %}
                {% endwith %}
                
                </ul>
                
                </ul> 
            {% endfor %} 
                </div>
                    <div style="padding: 30px;"}>
        {% else %} 
            <strong>There are no categories present.</strong> 
        {% endif %} 
                </div>
        </div>
            <div style="padding: 30px;"}>
        {% if pages %}
            {% for page in pages %}
            
            {% if user.is_authenticated %}
                <div>
                    <a href="/WER_app/add_review/{{ page.slug }}">Add a New Review</a><br />
                </div>
            {% else %}
                <p> Login to add a review! </p>
            {% endif %}
        {% endfor %}
        {% endif %}
                </div>

       
        
        <div>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        </div>
        <div id="Views">
            <p style="text-align:center;">Page Views: {{page.views}}</p>
        </div>

           
{% endblock %}